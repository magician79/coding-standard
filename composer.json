{
  "name": "magician79/coding-standard",
  "description": "Shared coding standards: PHPCS (PSR-12 + Slevomat) and PHPStan defaults for PHP8 projects.",
  "type": "library",
  "license": "MIT",
  "keywords": ["phpcs", "phpstan", "coding-standard", "slevomat", "psr-12"],
  "homepage": "https://github.com/magician79/coding-standard",
  "authors": [
    { "name": "Souvik Mitra", "email": "souvik.m@outlook.com", "role": "Developer" }
  ],
  "config": {
    "lock": false,
    "allow-plugins": {
      "dealerdirect/phpcodesniffer-composer-installer": true
    }
  },
  "require": {
    "php": ">=8.1",
    "squizlabs/php_codesniffer": "^3.10",
    "slevomat/coding-standard": "^8.16",
    "dealerdirect/phpcodesniffer-composer-installer": "^1.0",
    "phpstan/phpstan": "^1.11",
    "phpstan/phpstan-strict-rules": "^1.6",
    "php-parallel-lint/php-parallel-lint": "^1.4",
    "php-parallel-lint/php-console-highlighter": "^1.0",
    "php-parallel-lint/php-var-dump-check": "^0.5"
  },
  "autoload": {
    "psr-4": { }
  },
  "extra": {
    "branch-alias": {
      "dev-main": "1.x-dev"
    }
  },
  "scripts": {
    "lint:php": "sh -c 'vendor/bin/parallel-lint --colors -j 8 --exclude vendor --exclude var --exclude storage --exclude cache --exclude .git .; status=$?; if [ \"$status\" -eq 254 ]; then echo \"[parallel-lint] No PHP files to check. Skipping.\"; exit 0; else exit \"$status\"; fi'",
    "lint:php:strict": "sh -c 'vendor/bin/parallel-lint --colors -j 8 --no-progress --blame --exclude vendor --exclude var --exclude storage --exclude cache --exclude .git .; status=$?; if [ \"$status\" -eq 254 ]; then echo \"[parallel-lint] No PHP files to check (strict). Skipping.\"; exit 0; else exit \"$status\"; fi'",
    "lint:debug": "var-dump-check --tracy --skip-dir=vendor --skip-dir=var --skip-dir=storage --skip-dir=cache .",

    "cs": "phpcs --standard=ruleset/phpcs.pragmatic.xml --ignore=vendor/* .",
    "cs:strict": "phpcs --standard=ruleset/phpcs.strict.xml --ignore=vendor/* .",
    "fix": "phpcbf --standard=ruleset/phpcs.xml --ignore=vendor/* .",

    "stan": "phpstan analyse -c phpstan/pragmatic.neon.dist .",
    "stan:strict": "phpstan analyse -c phpstan/strict.neon.dist .",

    "check": [
      "@lint:php",
      "@cs",
      "@stan"
    ],
    "check:strict": [
      "@lint:php:strict",
      "@cs:strict",
      "@stan:strict"
    ]
  }
}
